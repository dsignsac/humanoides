---
import AnimatedLogo from "./AnimatedLogo.astro";

const links = [
    { name: "Core", href: "/#core" },
    {
        name: "Sync",
        href: "https://calendly.com/humanoidesyasociados/sync",
        external: true,
    },
];

// Get current path for active state detection
const currentPath = Astro.url.pathname;
---

<nav
    class="fixed top-0 left-0 w-full bg-brand-gray z-50 border-b-[3px] border-brand-red h-20 md:h-24 flex items-center"
>
    <div
        class="max-w-[1440px] mx-auto w-full flex items-center justify-between px-6 md:px-0"
    >
        <!-- Brand Identity Section -->
        <a href="/" class="flex items-center group relative z-[60]">
            <div class="flex items-center">
                <!-- Mobile: Full Logo (smaller) -->
                <div class="block md:hidden w-16 transition-all">
                    <AnimatedLogo
                        mode="static"
                        variant="iso"
                        color="var(--color-brand-red)"
                    />
                </div>
                <!-- Tablet/Desktop: Full Logo -->
                <div
                    class="hidden md:block w-60 lg:w-50 transition-all duration-300"
                >
                    <AnimatedLogo
                        mode="static"
                        variant="full"
                        color="var(--color-brand-red)"
                    />
                </div>
            </div>
        </a>

        <!-- Main Navigation -->
        <div class="flex items-center gap-6 md:gap-10">
            {
                links.map((link) => {
                    // Check if this link is active
                    const isActive =
                        link.href === currentPath ||
                        (link.href === "/#core" && currentPath === "/");

                    return (
                        <a
                            href={link.href}
                            target={link.external ? "_blank" : undefined}
                            rel={
                                link.external
                                    ? "noopener noreferrer"
                                    : undefined
                            }
                            class="nav-link group relative font-sans text-sm md:text-[18px] uppercase tracking-[0.2em] font-500 text-brand-red"
                        >
                            {link.name}
                            <div
                                class={`nav-underline absolute -bottom-2 left-0 h-[3px] bg-brand-red transition-all duration-300 ${isActive ? "w-full" : "w-0 group-hover:w-full"}`}
                            />
                        </a>
                    );
                })
            }
        </div>
    </div>
</nav>

<style>
    nav {
        transition: all 0.3s ease;
    }
</style>
