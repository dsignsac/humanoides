---
interface Props {
  label: string;
  value: number;
  size?: number;
  strokeWidth?: number;
}

const { label, value, size = 120, strokeWidth = 8 } = Astro.props;
const radius = (size - strokeWidth) / 2;
const circumference = radius * 2 * Math.PI;
const offset = circumference - (value / 100) * circumference;
---

<div class="flex flex-col items-center">
  <div class="relative flex items-center justify-center">
    <svg
      viewBox={`0 0 ${size} ${size}`}
      class="-rotate-90 w-full h-auto max-w-[120px]"
    >
      <!-- Track -->
      <circle
        cx={size / 2}
        cy={size / 2}
        r={radius}
        fill="transparent"
        stroke="currentColor"
        stroke-width={strokeWidth}
        class="text-white/10"></circle>
      <!-- Progress -->
      <circle
        cx={size / 2}
        cy={size / 2}
        r={radius}
        fill="transparent"
        stroke="currentColor"
        stroke-width={strokeWidth}
        stroke-dasharray={circumference}
        stroke-dashoffset={offset}
        stroke-linecap="round"
        class="text-brand-red transition-all duration-1000 ease-out"></circle>
    </svg>
    <div class="absolute inset-0 flex items-center justify-center">
      <span class="text-3xl font-sans font-bold text-white">{value}%</span>
    </div>
  </div>
  <span
    class="text-xs font-sans font-bold text-brand-red opacity-80 text-center mt-3 leading-tight uppercase tracking-wide"
  >
    {label}
  </span>
</div>
